/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"datasource_webtile": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/datasource_webtile.ts","common"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "../harp-webtile-datasource/index.ts":
/*!*******************************************!*\
  !*** ../harp-webtile-datasource/index.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(__webpack_require__(/*! ./lib/WebTileDataSource */ \"../harp-webtile-datasource/lib/WebTileDataSource.ts\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vaGFycC13ZWJ0aWxlLWRhdGFzb3VyY2UvaW5kZXgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vaGFycC13ZWJ0aWxlLWRhdGFzb3VyY2UvaW5kZXgudHM/NTMwNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSAyMDE3LTIwMTkgSEVSRSBFdXJvcGUgQi5WLlxuICogTGljZW5zZWQgdW5kZXIgQXBhY2hlIDIuMCwgc2VlIGZ1bGwgbGljZW5zZSBpbiBMSUNFTlNFXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmV4cG9ydCAqIGZyb20gXCIuL2xpYi9XZWJUaWxlRGF0YVNvdXJjZVwiO1xuIl0sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7QUFJQTs7Ozs7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../harp-webtile-datasource/index.ts\n");

/***/ }),

/***/ "../harp-webtile-datasource/lib/WebTileDataSource.ts":
/*!***********************************************************!*\
  !*** ../harp-webtile-datasource/lib/WebTileDataSource.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst THREE = __webpack_require__(/*! three */ \"three\");\nconst harp_geoutils_1 = __webpack_require__(/*! @here/harp-geoutils */ \"../harp-geoutils/index.ts\");\nconst harp_mapview_1 = __webpack_require__(/*! @here/harp-mapview */ \"../harp-mapview/index.ts\");\nconst harp_utils_1 = __webpack_require__(/*! @here/harp-utils */ \"../harp-utils/index.ts\");\nconst logger = harp_utils_1.LoggerManager.instance.create(\"MapView\");\n// tslint:disable-next-line:no-var-requires\nconst RTree = __webpack_require__(/*! rtree */ \"../../node_modules/rtree/lib/index.js\");\nconst textureLoader = new THREE.TextureLoader();\ntextureLoader.crossOrigin = \"\"; // empty assignment required to support CORS\n/**\n * Mapping from ISO-639-1 language codes to codes used by HERE Map Tile API (MARC)\n *\n * @see https://developer.here.com/documentation/map-tile/topics/resource-base-maptile.html\n * @see [MARC Code List for Languages](https://www.loc.gov/marc/languages/)\n */\nconst WEBTILE_LANGUAGE_DICTIONARY = {\n    eu: \"baq\",\n    ca: \"cat\",\n    zh: \"chi\",\n    cs: \"cze\",\n    da: \"dan\",\n    nl: \"dut\",\n    en: \"eng\",\n    fi: \"fin\",\n    fr: \"fre\",\n    de: \"ger\",\n    ga: \"gle\",\n    el: \"gre\",\n    he: \"heb\",\n    hi: \"hin\",\n    id: \"ind\",\n    it: \"ita\",\n    no: \"nor\",\n    fa: \"per\",\n    pl: \"pol\",\n    pt: \"por\",\n    ru: \"rus\",\n    si: \"sin\",\n    es: \"spa\",\n    sv: \"swe\",\n    th: \"tha\",\n    tr: \"tur\",\n    uk: \"ukr\",\n    ur: \"urd\",\n    vi: \"vie\",\n    cy: \"wel\"\n};\nconst hereCopyrightInfo = {\n    id: \"here.com\",\n    year: new Date().getFullYear(),\n    label: \"HERE\"\n};\n/**\n * Instances of `WebTileDataSource` can be used to add Web Tile to [[MapView]].\n *\n * Example:\n *\n * ```typescript\n * const webTileDataSource = new WebTileDataSource({\n *     appId: <appId>,\n *     appCode: <appCode>\n * });\n * ```\n * @see [[DataSource]], [[OmvDataSource]].\n */\nclass WebTileDataSource extends harp_mapview_1.DataSource {\n    /**\n     * Constructs a new `WebTileDataSource`.\n     *\n     * @param m_options Represents the [[WebTileDataSourceParameters]].\n     */\n    constructor(m_options) {\n        super(\"webtile\");\n        this.m_options = m_options;\n        this.cacheable = true;\n        this.storageLevelOffset = -1;\n        this.m_resolution = harp_utils_1.getOptionValue(m_options.resolution, 512);\n        this.m_ppi = harp_utils_1.getOptionValue(m_options.ppi, 320);\n        this.m_tileBaseAddress = m_options.tileBaseAddress || WebTileDataSource.TILE_BASE_NORMAL;\n    }\n    shouldPreloadTiles() {\n        return true;\n    }\n    getTilingScheme() {\n        return harp_geoutils_1.mercatorTilingScheme;\n    }\n    get minZoomLevel() {\n        return 1;\n    }\n    get maxZoomLevel() {\n        return 19;\n    }\n    setLanguages(languages) {\n        if (languages !== undefined) {\n            this.mapIsoLanguageToWebTile(languages);\n            this.mapView.markTilesDirty(this);\n        }\n    }\n    getTile(tileKey) {\n        const tile = new harp_mapview_1.Tile(this, tileKey);\n        const column = tileKey.column;\n        const row = tileKey.rowCount() - tileKey.row - 1;\n        const level = tileKey.level;\n        const { appId, appCode } = this.m_options;\n        const quadKey = tileKey.toQuadKey();\n        const server = parseInt(quadKey[quadKey.length - 1], 10) + 1;\n        let url = `https://${server}.${this.m_tileBaseAddress}/` +\n            `${level}/${column}/${row}/${this.m_resolution}/png8` +\n            `?app_id=${appId}&app_code=${appCode}` +\n            `&ppi=${this.m_ppi}` +\n            harp_utils_1.getOptionValue(this.m_options.additionalRequestParameters, \"\");\n        if (this.m_languages !== undefined && this.m_languages[0] !== undefined) {\n            url += `&lg=${this.m_languages[0]}`;\n        }\n        if (this.m_languages !== undefined && this.m_languages[1] !== undefined) {\n            url += `&lg2=${this.m_languages[1]}`;\n        }\n        Promise.all([this.loadTexture(url), this.getTileCopyright(tile)])\n            .then(([texture, copyrightInfo]) => {\n            tile.copyrightInfo = copyrightInfo;\n            texture.minFilter = THREE.LinearFilter;\n            texture.magFilter = THREE.LinearFilter;\n            texture.generateMipmaps = false;\n            tile.addOwnedTexture(texture);\n            const bounds = tile.boundingBox;\n            bounds.min.sub(tile.center);\n            bounds.max.sub(tile.center);\n            const size = new THREE.Vector3();\n            bounds.getSize(size);\n            const quad = new THREE.PlaneBufferGeometry(size.x, size.y);\n            const material = new THREE.MeshBasicMaterial({\n                map: texture\n            });\n            const mesh = new THREE.Mesh(quad, material);\n            tile.objects.push(mesh);\n            tile.invalidateResourceInfo();\n            this.requestUpdate();\n        })\n            .catch(error => {\n            logger.error(`failed to load webtile ${tileKey.mortonCode()}: ${error}`);\n        });\n        return tile;\n    }\n    parseBaseUrl(url) {\n        const parsed = new URL(url.startsWith(\"https:\") ? url : `https://${url}`);\n        const fullPath = parsed.pathname;\n        const maptilePathRegexp = new RegExp(\"^(/maptile/2.1/)([^/]+)/([^/]+)/([^/]+)\");\n        const match = fullPath.match(maptilePathRegexp);\n        if (!match) {\n            throw new Error(`WebTileDataSource: invalid baseUrl: ${url}`);\n        }\n        return {\n            baseUrl: parsed.host,\n            path: match[1],\n            tileType: match[2],\n            mapVestion: match[3],\n            scheme: match[4]\n        };\n    }\n    loadTexture(url) {\n        return new Promise((resolve, reject) => {\n            textureLoader.load(url, texture => {\n                resolve(texture);\n            }, undefined, // onProgress\n            () => {\n                // ErrorEvent received here doesn't have any meaningful code/ message to be\n                // shown\n                reject(new Error(\"failed to load texture\"));\n            });\n        });\n    }\n    getTileCopyright(tile) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // NOTE:\n            // For some reason Map Tile copyright endpoint doesn't return HERE as copyright holder, so\n            // add it statically.\n            //\n            // (https://developer.here.com/documentation/map-tile/topics/resource-copyright.html)\n            const result = [hereCopyrightInfo];\n            if (this.m_options.gatherCopyrightInfo === false) {\n                return result;\n            }\n            const rtree = yield this.getCopyrightCoverageData();\n            const tileBounds = {\n                x: Math.min(tile.geoBox.west, tile.geoBox.east),\n                y: Math.min(tile.geoBox.south, tile.geoBox.north),\n                h: Math.abs(tile.geoBox.longitudeSpan),\n                w: Math.abs(tile.geoBox.latitudeSpan)\n            };\n            const matchingEntries = rtree.search(tileBounds);\n            const tileLevel = tile.tileKey.level;\n            if (!matchingEntries) {\n                return result;\n            }\n            for (const entry of matchingEntries) {\n                const minLevel = harp_utils_1.getOptionValue(entry.minLevel, 0);\n                const maxLevel = harp_utils_1.getOptionValue(entry.maxLevel, Infinity);\n                if (tileLevel >= minLevel && tileLevel <= maxLevel) {\n                    result.push({\n                        id: entry.label\n                    });\n                }\n            }\n            return result;\n        });\n    }\n    getCopyrightCoverageData() {\n        const cachedResponse = this.m_cachedCopyrightResponse;\n        if (cachedResponse !== undefined) {\n            return cachedResponse;\n        }\n        const mapTileParams = this.parseBaseUrl(this.m_tileBaseAddress);\n        const baseHostName = mapTileParams.baseUrl;\n        const mapId = harp_utils_1.getOptionValue(mapTileParams.mapVestion, \"newest\");\n        const scheme = mapTileParams.scheme || \"normal.day\";\n        const baseScheme = scheme.split(\".\")[0] || \"normal\";\n        const { appId, appCode } = this.m_options;\n        const url = `https://1.${baseHostName}/maptile/2.1/copyright/${mapId}` +\n            `?output=json&app_id=${appId}&app_code=${appCode}`;\n        this.m_cachedCopyrightResponse = fetch(url)\n            .then(response => response.json())\n            .then((responseJson) => {\n            const entries = responseJson[baseScheme] || [];\n            const tree = new RTree();\n            if (!entries) {\n                return tree;\n            }\n            for (const entry of entries) {\n                if (!entry.boxes) {\n                    const wholeWorld = {\n                        x: -180,\n                        y: -90,\n                        w: 360,\n                        h: 180\n                    };\n                    tree.insert(wholeWorld, entry);\n                }\n                else {\n                    for (const box of entry.boxes) {\n                        const [bottom, left, top, right] = box;\n                        const bounds = {\n                            x: Math.min(left, right),\n                            y: Math.min(bottom, top),\n                            w: Math.abs(left - right),\n                            h: Math.abs(top - bottom)\n                        };\n                        tree.insert(bounds, entry);\n                    }\n                }\n            }\n            return tree;\n        });\n        return this.m_cachedCopyrightResponse;\n    }\n    mapIsoLanguageToWebTile(languages) {\n        this.m_languages = [];\n        for (const language of languages) {\n            if (WEBTILE_LANGUAGE_DICTIONARY[language] !== undefined) {\n                this.m_languages.push(WEBTILE_LANGUAGE_DICTIONARY[language]);\n            }\n        }\n    }\n}\n/**\n * Base address for Base Map rendered using `normal.day` scheme.\n * @see https://developer.here.com/documentation/map-tile/topics/example-normal-day-view.html\n */\nWebTileDataSource.TILE_BASE_NORMAL = \"base.maps.api.here.com/maptile/2.1/maptile/newest/normal.day\";\n/**\n * Base address for Aerial Map rendered using `hybrid.day` scheme.\n * @see https://developer.here.com/documentation/map-tile/topics/example-hybrid-map.html\n */\nWebTileDataSource.TILE_AERIAL_HYBRID = \"aerial.maps.api.here.com/maptile/2.1/maptile/newest/hybrid.day\";\n/**\n * Base address for Aerial Map rendered using `satellite.day` scheme.\n * @see https://developer.here.com/documentation/map-tile/topics/example-satellite-map.html\n */\nWebTileDataSource.TILE_AERIAL_SATELLITE = \"aerial.maps.api.here.com/maptile/2.1/maptile/newest/satellite.day\";\n/**\n * Base address for Traffic Map rendered using `normal.day` scheme.\n * @see https://developer.here.com/documentation/map-tile/topics/example-traffic.html\n */\nWebTileDataSource.TILE_TRAFFIC_NORMAL = \"traffic.maps.api.here.com/maptile/2.1/traffictile/newest/normal.day\";\nexports.WebTileDataSource = WebTileDataSource;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vaGFycC13ZWJ0aWxlLWRhdGFzb3VyY2UvbGliL1dlYlRpbGVEYXRhU291cmNlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2hhcnAtd2VidGlsZS1kYXRhc291cmNlL2xpYi9XZWJUaWxlRGF0YVNvdXJjZS50cz8wNzkwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTctMjAxOSBIRVJFIEV1cm9wZSBCLlYuXG4gKiBMaWNlbnNlZCB1bmRlciBBcGFjaGUgMi4wLCBzZWUgZnVsbCBsaWNlbnNlIGluIExJQ0VOU0VcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCI7XG5cbmltcG9ydCB7IG1lcmNhdG9yVGlsaW5nU2NoZW1lLCBUaWxlS2V5LCBUaWxpbmdTY2hlbWUgfSBmcm9tIFwiQGhlcmUvaGFycC1nZW91dGlsc1wiO1xuaW1wb3J0IHsgQ29weXJpZ2h0SW5mbywgRGF0YVNvdXJjZSwgVGlsZSB9IGZyb20gXCJAaGVyZS9oYXJwLW1hcHZpZXdcIjtcbmltcG9ydCB7IGdldE9wdGlvblZhbHVlLCBMb2dnZXJNYW5hZ2VyIH0gZnJvbSBcIkBoZXJlL2hhcnAtdXRpbHNcIjtcblxuY29uc3QgbG9nZ2VyID0gTG9nZ2VyTWFuYWdlci5pbnN0YW5jZS5jcmVhdGUoXCJNYXBWaWV3XCIpO1xuXG5kZWNsYXJlIGNvbnN0IHJlcXVpcmU6IGFueTtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby12YXItcmVxdWlyZXNcbmNvbnN0IFJUcmVlID0gcmVxdWlyZShcInJ0cmVlXCIpO1xuXG5jb25zdCB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcbnRleHR1cmVMb2FkZXIuY3Jvc3NPcmlnaW4gPSBcIlwiOyAvLyBlbXB0eSBhc3NpZ25tZW50IHJlcXVpcmVkIHRvIHN1cHBvcnQgQ09SU1xuXG4vKipcbiAqIEFuIGludGVyZmFjZSBmb3IgdGhlIHR5cGUgb2YgcGFyYW1ldGVycyB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gdGhlIFtbV2ViVGlsZURhdGFTb3VyY2VdXS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXZWJUaWxlRGF0YVNvdXJjZVBhcmFtZXRlcnMge1xuICAgIC8qKlxuICAgICAqIFRoZSBgYXBwSWRgIGZvciB0aGUgYWNjZXNzIG9mIHRoZSBXZWIgVGlsZSBEYXRhLlxuICAgICAqL1xuICAgIGFwcElkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYGFwcENvZGVgIGZvciB0aGUgYWNjZXNzIG9mIHRoZSBXZWIgVGlsZSBEYXRhLlxuICAgICAqL1xuICAgIGFwcENvZGU6IHN0cmluZztcblxuICAgIC8vIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aFxuICAgIC8qKlxuICAgICAqIFRoaXMgcGFyYW1ldGVyIHNwZWNpZmllcyBzdGF0aWMgcGFydCBvZiB0aGUgZmluYWwgV2ViIFRpbGUgVVJMOlxuICAgICAqICAqIGJhc2UgdXJsIHdpdGhvdXQgcHJvdG9jb2wgYW5kIGxvYWQtYmFsYW5jaW5nIChgezEtNH0uYCkgcHJlZml4XG4gICAgICogICogcGF0aCxcbiAgICAgKiAgKiByZXNvdXJjZSAodGlsZSB0eXBlKVxuICAgICAqICAqIG1hcCB2ZXJzaW9uLFxuICAgICAqICAqIHNjaGVtZVxuICAgICAqXG4gICAgICogU2VlIFtNYXAgVGlsZSBBUEldXG4gICAgICogKGh0dHBzOi8vZGV2ZWxvcGVyLmhlcmUuY29tL2RvY3VtZW50YXRpb24vbWFwLXRpbGUvdG9waWNzL3JlcXVlc3QtY29uc3RydWN0aW5nLmh0bWwpIGZvclxuICAgICAqIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSwgZ2l2ZW4gZmluYWwgdXJsIHByZXNlbnRlZCBpbiBkb2N1bWVudGF0aW9uXG4gICAgICogKGh0dHBzOi8vZGV2ZWxvcGVyLmhlcmUuY29tL2RvY3VtZW50YXRpb24vbWFwLXRpbGUvdG9waWNzL2V4YW1wbGVzLWJhc2UuaHRtbCk6XG4gICAgICpcbiAgICAgKiAgICAgaHR0cHM6Ly9cbiAgICAgKiAgICAgICAyLmJhc2UubWFwcy5hcGkuaGVyZS5jb20vbWFwdGlsZS8yLjEvbWFwdGlsZS9uZXdlc3Qvbm9ybWFsLmRheS8xMS81MjUvNzYxLzI1Ni9wbmc4XG4gICAgICogICAgICAgP2FwcF9pZD17WU9VUl9BUFBfSUR9XG4gICAgICogICAgICAgJmFwcF9jb2RlPXtZT1VSX0FQUF9DT0RFfVxuICAgICAqXG4gICAgICogYHRpbGVCYXNlQWRkcmVzc2Agc2hvdWxkIGJlOlxuICAgICAqXG4gICAgICogICAgICBiYXNlLm1hcHMuYXBpLmhlcmUuY29tL21hcHRpbGUvMi4xL21hcHRpbGUvbmV3ZXN0L25vcm1hbC5kYXlcbiAgICAgKlxuICAgICAqIFJlc3Qgb2YgcGFyYW1ldGVycyBhcmUgYWRkZWQgYnkgW1tXZWJUaWxlRGF0YVNvdXJjZV1dLlxuICAgICAqXG4gICAgICogQHNlZSBbTWFwIFRpbGUgQVBJXVxuICAgICAqIChodHRwczovL2RldmVsb3Blci5oZXJlLmNvbS9kb2N1bWVudGF0aW9uL21hcC10aWxlL3RvcGljcy9pbnRyb2R1Y3Rpb24uaHRtbClcbiAgICAgKiBAZGVmYXVsdCBbW1dlYlRpbGVEYXRhU291cmNlLlRJTEVfQkFTRV9OT1JNQUxdXVxuICAgICAqIEBzZWUgW1tXZWJUaWxlRGF0YVNvdXJjZS5USUxFX0JBU0VfTk9STUFMXV1cbiAgICAgKiBAc2VlIFtbV2ViVGlsZURhdGFTb3VyY2UuVElMRV9BRVJJQUxfSFlCUklEXV1cbiAgICAgKiBAc2VlIFtbV2ViVGlsZURhdGFTb3VyY2UuVElMRV9BRVJJQUxfU0FURUxMSVRFXV1cbiAgICAgKiBAc2VlIFtbV2ViVGlsZURhdGFTb3VyY2UuVElMRV9UUkFGRklDX05PUk1BTF1dXG4gICAgICovXG4gICAgdGlsZUJhc2VBZGRyZXNzPzogc3RyaW5nO1xuICAgIC8vIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoXG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVzb2x1dGlvbiBvZiBXZWIgVGlsZSBpbWFnZXMsIGRlZmF1bHRzIHRvIDUxMi5cbiAgICAgKi9cbiAgICByZXNvbHV0aW9uPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogU3RyaW5nIHdoaWNoIGlzIGFwcGVuZGVkIHRvIHRoZSB0aWxlIHJlcXVlc3QgdXJsLCBlLmcuIHRvIGFkZCBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICAgKiB0byB0aGUgdGlsZSByZXF1ZXN0cyBhcyBkZXNjcmliZWQgaW5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmhlcmUuY29tL2RvY3VtZW50YXRpb24vbWFwLXRpbGUvdG9waWNzL3Jlc291cmNlLWJhc2UtYmFzZXRpbGUuaHRtbFxuICAgICAqL1xuICAgIGFkZGl0aW9uYWxSZXF1ZXN0UGFyYW1ldGVycz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIHBwaSBwYXJhbWV0ZXIgd2hpY2ggaW1wYWN0cyBmb250L2ljb24gc2l6ZXMsIHJvYWQgd2lkdGggYW5kIG90aGVyIGNvbnRlbnRcbiAgICAgKiBvZiB0aGUgbWFwIHRpbGVzLiBGb3IgdmFsaWQgdmFsdWVzIGFuZCByZXN0cmljdGlvbnNcbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmhlcmUuY29tL2RvY3VtZW50YXRpb24vbWFwLXRpbGUvdG9waWNzL3Jlc291cmNlLWJhc2UtYmFzZXRpbGUuaHRtbCNwcGlcbiAgICAgKi9cbiAgICBwcGk/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHByb3ZpZGUgY29weXJpZ2h0IGluZm8uXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBgdHJ1ZWBcbiAgICAgKi9cbiAgICBnYXRoZXJDb3B5cmlnaHRJbmZvPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBNYXBwaW5nIGZyb20gSVNPLTYzOS0xIGxhbmd1YWdlIGNvZGVzIHRvIGNvZGVzIHVzZWQgYnkgSEVSRSBNYXAgVGlsZSBBUEkgKE1BUkMpXG4gKlxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5oZXJlLmNvbS9kb2N1bWVudGF0aW9uL21hcC10aWxlL3RvcGljcy9yZXNvdXJjZS1iYXNlLW1hcHRpbGUuaHRtbFxuICogQHNlZSBbTUFSQyBDb2RlIExpc3QgZm9yIExhbmd1YWdlc10oaHR0cHM6Ly93d3cubG9jLmdvdi9tYXJjL2xhbmd1YWdlcy8pXG4gKi9cbmNvbnN0IFdFQlRJTEVfTEFOR1VBR0VfRElDVElPTkFSWTogeyBbczogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgZXU6IFwiYmFxXCIsXG4gICAgY2E6IFwiY2F0XCIsXG4gICAgemg6IFwiY2hpXCIsXG4gICAgY3M6IFwiY3plXCIsXG4gICAgZGE6IFwiZGFuXCIsXG4gICAgbmw6IFwiZHV0XCIsXG4gICAgZW46IFwiZW5nXCIsXG4gICAgZmk6IFwiZmluXCIsXG4gICAgZnI6IFwiZnJlXCIsXG4gICAgZGU6IFwiZ2VyXCIsXG4gICAgZ2E6IFwiZ2xlXCIsXG4gICAgZWw6IFwiZ3JlXCIsXG4gICAgaGU6IFwiaGViXCIsXG4gICAgaGk6IFwiaGluXCIsXG4gICAgaWQ6IFwiaW5kXCIsXG4gICAgaXQ6IFwiaXRhXCIsXG4gICAgbm86IFwibm9yXCIsXG4gICAgZmE6IFwicGVyXCIsXG4gICAgcGw6IFwicG9sXCIsXG4gICAgcHQ6IFwicG9yXCIsXG4gICAgcnU6IFwicnVzXCIsXG4gICAgc2k6IFwic2luXCIsXG4gICAgZXM6IFwic3BhXCIsXG4gICAgc3Y6IFwic3dlXCIsXG4gICAgdGg6IFwidGhhXCIsXG4gICAgdHI6IFwidHVyXCIsXG4gICAgdWs6IFwidWtyXCIsXG4gICAgdXI6IFwidXJkXCIsXG4gICAgdmk6IFwidmllXCIsXG4gICAgY3k6IFwid2VsXCJcbn07XG5cbi8qKlxuICogU2NoZW1hIG9mIE1hcCBUaWxlIEFQSSBgY29weXJpZ2h0YCBlbmRwb2ludCBKU09OIHJlc3BvbnNlLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuaGVyZS5jb20vZG9jdW1lbnRhdGlvbi9tYXAtdGlsZS90b3BpY3MvcmVzb3VyY2UtY29weXJpZ2h0Lmh0bWxcbiAqL1xuaW50ZXJmYWNlIEFyZWFDb3B5cmlnaHRJbmZvIHtcbiAgICAvKipcbiAgICAgKiBNaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBzcGVjaWZpZWQgY29weXJpZ2h0IGxhYmVsLlxuICAgICAqL1xuICAgIG1pbkxldmVsPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogTWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgc3BlY2lmaWVkIGNvcHlyaWdodCBsYWJlbC5cbiAgICAgKi9cbiAgICBtYXhMZXZlbD86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIENvcHlyaWdodCB0ZXh0IHRvIGRpc3BsYXkgYWZ0ZXIgdGhlIGNvcHlyaWdodCBzeW1ib2wgb24gdGhlIG1hcC5cbiAgICAgKi9cbiAgICBsYWJlbDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVmVyYm9zZSBjb3B5cmlnaHQgdGV4dCBvZiB0aGUgbGFiZWwgdG8gZGlzcGxheSBieSBtb3VzZSBvdmVyIGxhYmVsIG9yIGluZm8gbWVudSBlbnRyeS5cbiAgICAgKi9cbiAgICBhbHQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYm91bmRpbmcgYm94ZXMgZGVmaW5lIGFyZWFzIHdoZXJlIHNwZWNpZmljIGNvcHlyaWdodHMgYXJlIHZhbGlkLiBBIGJvdW5kaW5nIGJveCBpc1xuICAgICAqIGRlZmluZWQgYnkgYm90dG9tIChsYXRpdHVkZSksIGxlZnQgKGxvbmdpdHVkZSkgYW5kIHRvcCAobGF0aXR1ZGUpLCByaWdodCAobG9uZ2l0dWRlKS5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGNvcHlyaWdodCBoYXMgbm8gYm94ZXMgZWxlbWVudCBhbmQgY292ZXJzIGFsbCBvdGhlciBhcmVhcy5cbiAgICAgKi9cbiAgICBib3hlcz86IEFycmF5PFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdPjtcbn1cblxuLyoqXG4gKiBTY2hlbWEgb2YgTWFwIFRpbGUgQVBJIGBjb3B5cmlnaHRgIGVuZHBvaW50IEpTT04gcmVzcG9uc2UuXG4gKlxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5oZXJlLmNvbS9kb2N1bWVudGF0aW9uL21hcC10aWxlL3RvcGljcy9yZXNvdXJjZS1jb3B5cmlnaHQuaHRtbFxuICovXG5pbnRlcmZhY2UgQ29weXJpZ2h0Q292ZXJhZ2VSZXNwb25zZSB7XG4gICAgW3NjaGVtZTogc3RyaW5nXTogQXJlYUNvcHlyaWdodEluZm9bXTtcbn1cblxuLyoqXG4gKiBNYXAgVGlsZSByZXF1ZXN0IHBhcmFtcy5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmhlcmUuY29tL2RvY3VtZW50YXRpb24vbWFwLXRpbGUvdG9waWNzL3JlcXVlc3QtY29uc3RydWN0aW5nLmh0bWxcbiAqL1xuaW50ZXJmYWNlIE1hcFRpbGVQYXJhbXMge1xuICAgIC8qKlxuICAgICAqIEJhc2V1cmwgd2l0aG91dCBsb2FkLWJhbGFuY2luZyBwcmVmaXggYW5kIHNjaGVtZS5cbiAgICAgKi9cbiAgICBiYXNlVXJsOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBQYXRoLCBzaG91bGQgYmUgYC9tYXB0aWxlLzIuMWBcbiAgICAgKi9cbiAgICBwYXRoOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaWxlIHR5cGUgKGBiYXNldGlsZWAsIGBtYXB0aWxlYCBldGMpLlxuICAgICAqXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5oZXJlLmNvbS9kb2N1bWVudGF0aW9uL21hcC10aWxlL3RvcGljcy9yZXF1ZXN0LWNvbnN0cnVjdGluZy5odG1sXG4gICAgICovXG4gICAgdGlsZVR5cGU6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE1hcCB2ZXJzaW9uIC0gYG5ld2VzdGAgb3IgYGhhc2hgIHZhbHVlXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBgbmV3ZXN0YFxuICAgICAqL1xuICAgIG1hcFZlc3Rpb24/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBTY2hlbWVcbiAgICAgKlxuICAgICAqIEBkZWZhdWx0IGBub3JtYWwuZGF5YFxuICAgICAqL1xuICAgIHNjaGVtZT86IHN0cmluZztcbn1cblxuY29uc3QgaGVyZUNvcHlyaWdodEluZm86IENvcHlyaWdodEluZm8gPSB7XG4gICAgaWQ6IFwiaGVyZS5jb21cIixcbiAgICB5ZWFyOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksXG4gICAgbGFiZWw6IFwiSEVSRVwiXG59O1xuXG4vKipcbiAqIEluc3RhbmNlcyBvZiBgV2ViVGlsZURhdGFTb3VyY2VgIGNhbiBiZSB1c2VkIHRvIGFkZCBXZWIgVGlsZSB0byBbW01hcFZpZXddXS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHdlYlRpbGVEYXRhU291cmNlID0gbmV3IFdlYlRpbGVEYXRhU291cmNlKHtcbiAqICAgICBhcHBJZDogPGFwcElkPixcbiAqICAgICBhcHBDb2RlOiA8YXBwQ29kZT5cbiAqIH0pO1xuICogYGBgXG4gKiBAc2VlIFtbRGF0YVNvdXJjZV1dLCBbW09tdkRhdGFTb3VyY2VdXS5cbiAqL1xuZXhwb3J0IGNsYXNzIFdlYlRpbGVEYXRhU291cmNlIGV4dGVuZHMgRGF0YVNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQmFzZSBhZGRyZXNzIGZvciBCYXNlIE1hcCByZW5kZXJlZCB1c2luZyBgbm9ybWFsLmRheWAgc2NoZW1lLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuaGVyZS5jb20vZG9jdW1lbnRhdGlvbi9tYXAtdGlsZS90b3BpY3MvZXhhbXBsZS1ub3JtYWwtZGF5LXZpZXcuaHRtbFxuICAgICAqL1xuICAgIHN0YXRpYyByZWFkb25seSBUSUxFX0JBU0VfTk9STUFMID1cbiAgICAgICAgXCJiYXNlLm1hcHMuYXBpLmhlcmUuY29tL21hcHRpbGUvMi4xL21hcHRpbGUvbmV3ZXN0L25vcm1hbC5kYXlcIjtcbiAgICAvKipcbiAgICAgKiBCYXNlIGFkZHJlc3MgZm9yIEFlcmlhbCBNYXAgcmVuZGVyZWQgdXNpbmcgYGh5YnJpZC5kYXlgIHNjaGVtZS5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmhlcmUuY29tL2RvY3VtZW50YXRpb24vbWFwLXRpbGUvdG9waWNzL2V4YW1wbGUtaHlicmlkLW1hcC5odG1sXG4gICAgICovXG4gICAgc3RhdGljIHJlYWRvbmx5IFRJTEVfQUVSSUFMX0hZQlJJRCA9XG4gICAgICAgIFwiYWVyaWFsLm1hcHMuYXBpLmhlcmUuY29tL21hcHRpbGUvMi4xL21hcHRpbGUvbmV3ZXN0L2h5YnJpZC5kYXlcIjtcblxuICAgIC8qKlxuICAgICAqIEJhc2UgYWRkcmVzcyBmb3IgQWVyaWFsIE1hcCByZW5kZXJlZCB1c2luZyBgc2F0ZWxsaXRlLmRheWAgc2NoZW1lLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuaGVyZS5jb20vZG9jdW1lbnRhdGlvbi9tYXAtdGlsZS90b3BpY3MvZXhhbXBsZS1zYXRlbGxpdGUtbWFwLmh0bWxcbiAgICAgKi9cbiAgICBzdGF0aWMgcmVhZG9ubHkgVElMRV9BRVJJQUxfU0FURUxMSVRFID1cbiAgICAgICAgXCJhZXJpYWwubWFwcy5hcGkuaGVyZS5jb20vbWFwdGlsZS8yLjEvbWFwdGlsZS9uZXdlc3Qvc2F0ZWxsaXRlLmRheVwiO1xuXG4gICAgLyoqXG4gICAgICogQmFzZSBhZGRyZXNzIGZvciBUcmFmZmljIE1hcCByZW5kZXJlZCB1c2luZyBgbm9ybWFsLmRheWAgc2NoZW1lLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuaGVyZS5jb20vZG9jdW1lbnRhdGlvbi9tYXAtdGlsZS90b3BpY3MvZXhhbXBsZS10cmFmZmljLmh0bWxcbiAgICAgKi9cbiAgICBzdGF0aWMgcmVhZG9ubHkgVElMRV9UUkFGRklDX05PUk1BTCA9XG4gICAgICAgIFwidHJhZmZpYy5tYXBzLmFwaS5oZXJlLmNvbS9tYXB0aWxlLzIuMS90cmFmZmljdGlsZS9uZXdlc3Qvbm9ybWFsLmRheVwiO1xuXG4gICAgcHJpdmF0ZSBtX3Jlc29sdXRpb246IG51bWJlcjtcbiAgICBwcml2YXRlIG1fcHBpOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBtX3RpbGVCYXNlQWRkcmVzczogc3RyaW5nO1xuICAgIHByaXZhdGUgbV9sYW5ndWFnZXM/OiBzdHJpbmdbXTtcbiAgICBwcml2YXRlIG1fY2FjaGVkQ29weXJpZ2h0UmVzcG9uc2U/OiBQcm9taXNlPEFyZWFDb3B5cmlnaHRJbmZvW10+O1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBgV2ViVGlsZURhdGFTb3VyY2VgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1fb3B0aW9ucyBSZXByZXNlbnRzIHRoZSBbW1dlYlRpbGVEYXRhU291cmNlUGFyYW1ldGVyc11dLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgbV9vcHRpb25zOiBXZWJUaWxlRGF0YVNvdXJjZVBhcmFtZXRlcnMpIHtcbiAgICAgICAgc3VwZXIoXCJ3ZWJ0aWxlXCIpO1xuICAgICAgICB0aGlzLmNhY2hlYWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RvcmFnZUxldmVsT2Zmc2V0ID0gLTE7XG4gICAgICAgIHRoaXMubV9yZXNvbHV0aW9uID0gZ2V0T3B0aW9uVmFsdWUobV9vcHRpb25zLnJlc29sdXRpb24sIDUxMik7XG4gICAgICAgIHRoaXMubV9wcGkgPSBnZXRPcHRpb25WYWx1ZShtX29wdGlvbnMucHBpLCAzMjApO1xuICAgICAgICB0aGlzLm1fdGlsZUJhc2VBZGRyZXNzID0gbV9vcHRpb25zLnRpbGVCYXNlQWRkcmVzcyB8fCBXZWJUaWxlRGF0YVNvdXJjZS5USUxFX0JBU0VfTk9STUFMO1xuICAgIH1cblxuICAgIHNob3VsZFByZWxvYWRUaWxlcygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZ2V0VGlsaW5nU2NoZW1lKCk6IFRpbGluZ1NjaGVtZSB7XG4gICAgICAgIHJldHVybiBtZXJjYXRvclRpbGluZ1NjaGVtZTtcbiAgICB9XG5cbiAgICBnZXQgbWluWm9vbUxldmVsKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGdldCBtYXhab29tTGV2ZWwoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDE5O1xuICAgIH1cblxuICAgIHNldExhbmd1YWdlcyhsYW5ndWFnZXM/OiBzdHJpbmdbXSk6IHZvaWQge1xuICAgICAgICBpZiAobGFuZ3VhZ2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMubWFwSXNvTGFuZ3VhZ2VUb1dlYlRpbGUobGFuZ3VhZ2VzKTtcbiAgICAgICAgICAgIHRoaXMubWFwVmlldy5tYXJrVGlsZXNEaXJ0eSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFRpbGUodGlsZUtleTogVGlsZUtleSk6IFRpbGUge1xuICAgICAgICBjb25zdCB0aWxlID0gbmV3IFRpbGUodGhpcywgdGlsZUtleSk7XG5cbiAgICAgICAgY29uc3QgY29sdW1uID0gdGlsZUtleS5jb2x1bW47XG4gICAgICAgIGNvbnN0IHJvdyA9IHRpbGVLZXkucm93Q291bnQoKSAtIHRpbGVLZXkucm93IC0gMTtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSB0aWxlS2V5LmxldmVsO1xuICAgICAgICBjb25zdCB7IGFwcElkLCBhcHBDb2RlIH0gPSB0aGlzLm1fb3B0aW9ucztcbiAgICAgICAgY29uc3QgcXVhZEtleSA9IHRpbGVLZXkudG9RdWFkS2V5KCk7XG4gICAgICAgIGNvbnN0IHNlcnZlciA9IHBhcnNlSW50KHF1YWRLZXlbcXVhZEtleS5sZW5ndGggLSAxXSwgMTApICsgMTtcbiAgICAgICAgbGV0IHVybCA9XG4gICAgICAgICAgICBgaHR0cHM6Ly8ke3NlcnZlcn0uJHt0aGlzLm1fdGlsZUJhc2VBZGRyZXNzfS9gICtcbiAgICAgICAgICAgIGAke2xldmVsfS8ke2NvbHVtbn0vJHtyb3d9LyR7dGhpcy5tX3Jlc29sdXRpb259L3BuZzhgICtcbiAgICAgICAgICAgIGA/YXBwX2lkPSR7YXBwSWR9JmFwcF9jb2RlPSR7YXBwQ29kZX1gICtcbiAgICAgICAgICAgIGAmcHBpPSR7dGhpcy5tX3BwaX1gICtcbiAgICAgICAgICAgIGdldE9wdGlvblZhbHVlKHRoaXMubV9vcHRpb25zLmFkZGl0aW9uYWxSZXF1ZXN0UGFyYW1ldGVycywgXCJcIik7XG5cbiAgICAgICAgaWYgKHRoaXMubV9sYW5ndWFnZXMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm1fbGFuZ3VhZ2VzWzBdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCArPSBgJmxnPSR7dGhpcy5tX2xhbmd1YWdlc1swXX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubV9sYW5ndWFnZXMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm1fbGFuZ3VhZ2VzWzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCArPSBgJmxnMj0ke3RoaXMubV9sYW5ndWFnZXNbMV19YDtcbiAgICAgICAgfVxuXG4gICAgICAgIFByb21pc2UuYWxsKFt0aGlzLmxvYWRUZXh0dXJlKHVybCksIHRoaXMuZ2V0VGlsZUNvcHlyaWdodCh0aWxlKV0pXG4gICAgICAgICAgICAudGhlbigoW3RleHR1cmUsIGNvcHlyaWdodEluZm9dKSA9PiB7XG4gICAgICAgICAgICAgICAgdGlsZS5jb3B5cmlnaHRJbmZvID0gY29weXJpZ2h0SW5mbztcblxuICAgICAgICAgICAgICAgIHRleHR1cmUubWluRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xuICAgICAgICAgICAgICAgIHRleHR1cmUubWFnRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xuICAgICAgICAgICAgICAgIHRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGlsZS5hZGRPd25lZFRleHR1cmUodGV4dHVyZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBib3VuZHMgPSB0aWxlLmJvdW5kaW5nQm94O1xuXG4gICAgICAgICAgICAgICAgYm91bmRzLm1pbi5zdWIodGlsZS5jZW50ZXIpO1xuICAgICAgICAgICAgICAgIGJvdW5kcy5tYXguc3ViKHRpbGUuY2VudGVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBib3VuZHMuZ2V0U2l6ZShzaXplKTtcbiAgICAgICAgICAgICAgICBjb25zdCBxdWFkID0gbmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoc2l6ZS54LCBzaXplLnkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgICAgICAgICAgICAgbWFwOiB0ZXh0dXJlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKHF1YWQsIG1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICB0aWxlLm9iamVjdHMucHVzaChtZXNoKTtcbiAgICAgICAgICAgICAgICB0aWxlLmludmFsaWRhdGVSZXNvdXJjZUluZm8oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgZmFpbGVkIHRvIGxvYWQgd2VidGlsZSAke3RpbGVLZXkubW9ydG9uQ29kZSgpfTogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBhcnNlQmFzZVVybCh1cmw6IHN0cmluZyk6IE1hcFRpbGVQYXJhbXMge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybC5zdGFydHNXaXRoKFwiaHR0cHM6XCIpID8gdXJsIDogYGh0dHBzOi8vJHt1cmx9YCk7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGFyc2VkLnBhdGhuYW1lO1xuICAgICAgICBjb25zdCBtYXB0aWxlUGF0aFJlZ2V4cCA9IG5ldyBSZWdFeHAoXCJeKC9tYXB0aWxlLzIuMS8pKFteL10rKS8oW14vXSspLyhbXi9dKylcIik7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gZnVsbFBhdGgubWF0Y2gobWFwdGlsZVBhdGhSZWdleHApO1xuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFdlYlRpbGVEYXRhU291cmNlOiBpbnZhbGlkIGJhc2VVcmw6ICR7dXJsfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiYXNlVXJsOiBwYXJzZWQuaG9zdCxcbiAgICAgICAgICAgIHBhdGg6IG1hdGNoWzFdLFxuICAgICAgICAgICAgdGlsZVR5cGU6IG1hdGNoWzJdLFxuICAgICAgICAgICAgbWFwVmVzdGlvbjogbWF0Y2hbM10sXG4gICAgICAgICAgICBzY2hlbWU6IG1hdGNoWzRdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2FkVGV4dHVyZSh1cmw6IHN0cmluZyk6IFByb21pc2U8VEhSRUUuVGV4dHVyZT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGV4dHVyZUxvYWRlci5sb2FkKFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gb25Qcm9ncmVzc1xuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXJyb3JFdmVudCByZWNlaXZlZCBoZXJlIGRvZXNuJ3QgaGF2ZSBhbnkgbWVhbmluZ2Z1bCBjb2RlLyBtZXNzYWdlIHRvIGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3duXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJmYWlsZWQgdG8gbG9hZCB0ZXh0dXJlXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGdldFRpbGVDb3B5cmlnaHQodGlsZTogVGlsZSk6IFByb21pc2U8Q29weXJpZ2h0SW5mb1tdPiB7XG4gICAgICAgIC8vIE5PVEU6XG4gICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiBNYXAgVGlsZSBjb3B5cmlnaHQgZW5kcG9pbnQgZG9lc24ndCByZXR1cm4gSEVSRSBhcyBjb3B5cmlnaHQgaG9sZGVyLCBzb1xuICAgICAgICAvLyBhZGQgaXQgc3RhdGljYWxseS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLmhlcmUuY29tL2RvY3VtZW50YXRpb24vbWFwLXRpbGUvdG9waWNzL3Jlc291cmNlLWNvcHlyaWdodC5odG1sKVxuICAgICAgICBjb25zdCByZXN1bHQ6IENvcHlyaWdodEluZm9bXSA9IFtoZXJlQ29weXJpZ2h0SW5mb107XG5cbiAgICAgICAgaWYgKHRoaXMubV9vcHRpb25zLmdhdGhlckNvcHlyaWdodEluZm8gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ0cmVlID0gYXdhaXQgdGhpcy5nZXRDb3B5cmlnaHRDb3ZlcmFnZURhdGEoKTtcbiAgICAgICAgY29uc3QgdGlsZUJvdW5kcyA9IHtcbiAgICAgICAgICAgIHg6IE1hdGgubWluKHRpbGUuZ2VvQm94Lndlc3QsIHRpbGUuZ2VvQm94LmVhc3QpLFxuICAgICAgICAgICAgeTogTWF0aC5taW4odGlsZS5nZW9Cb3guc291dGgsIHRpbGUuZ2VvQm94Lm5vcnRoKSxcbiAgICAgICAgICAgIGg6IE1hdGguYWJzKHRpbGUuZ2VvQm94LmxvbmdpdHVkZVNwYW4pLFxuICAgICAgICAgICAgdzogTWF0aC5hYnModGlsZS5nZW9Cb3gubGF0aXR1ZGVTcGFuKVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXRjaGluZ0VudHJpZXM6IEFyZWFDb3B5cmlnaHRJbmZvW10gfCBudWxsIHwgdW5kZWZpbmVkID0gcnRyZWUuc2VhcmNoKHRpbGVCb3VuZHMpO1xuICAgICAgICBjb25zdCB0aWxlTGV2ZWwgPSB0aWxlLnRpbGVLZXkubGV2ZWw7XG4gICAgICAgIGlmICghbWF0Y2hpbmdFbnRyaWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgbWF0Y2hpbmdFbnRyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCBtaW5MZXZlbCA9IGdldE9wdGlvblZhbHVlKGVudHJ5Lm1pbkxldmVsLCAwKTtcbiAgICAgICAgICAgIGNvbnN0IG1heExldmVsID0gZ2V0T3B0aW9uVmFsdWUoZW50cnkubWF4TGV2ZWwsIEluZmluaXR5KTtcblxuICAgICAgICAgICAgaWYgKHRpbGVMZXZlbCA+PSBtaW5MZXZlbCAmJiB0aWxlTGV2ZWwgPD0gbWF4TGV2ZWwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBlbnRyeS5sYWJlbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb3B5cmlnaHRDb3ZlcmFnZURhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgY29uc3QgY2FjaGVkUmVzcG9uc2UgPSB0aGlzLm1fY2FjaGVkQ29weXJpZ2h0UmVzcG9uc2U7XG4gICAgICAgIGlmIChjYWNoZWRSZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkUmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXBUaWxlUGFyYW1zID0gdGhpcy5wYXJzZUJhc2VVcmwodGhpcy5tX3RpbGVCYXNlQWRkcmVzcyk7XG4gICAgICAgIGNvbnN0IGJhc2VIb3N0TmFtZSA9IG1hcFRpbGVQYXJhbXMuYmFzZVVybDtcbiAgICAgICAgY29uc3QgbWFwSWQgPSBnZXRPcHRpb25WYWx1ZShtYXBUaWxlUGFyYW1zLm1hcFZlc3Rpb24sIFwibmV3ZXN0XCIpO1xuICAgICAgICBjb25zdCBzY2hlbWUgPSBtYXBUaWxlUGFyYW1zLnNjaGVtZSB8fCBcIm5vcm1hbC5kYXlcIjtcbiAgICAgICAgY29uc3QgYmFzZVNjaGVtZSA9IHNjaGVtZS5zcGxpdChcIi5cIilbMF0gfHwgXCJub3JtYWxcIjtcbiAgICAgICAgY29uc3QgeyBhcHBJZCwgYXBwQ29kZSB9ID0gdGhpcy5tX29wdGlvbnM7XG4gICAgICAgIGNvbnN0IHVybCA9XG4gICAgICAgICAgICBgaHR0cHM6Ly8xLiR7YmFzZUhvc3ROYW1lfS9tYXB0aWxlLzIuMS9jb3B5cmlnaHQvJHttYXBJZH1gICtcbiAgICAgICAgICAgIGA/b3V0cHV0PWpzb24mYXBwX2lkPSR7YXBwSWR9JmFwcF9jb2RlPSR7YXBwQ29kZX1gO1xuXG4gICAgICAgIHRoaXMubV9jYWNoZWRDb3B5cmlnaHRSZXNwb25zZSA9IGZldGNoKHVybClcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZUpzb246IENvcHlyaWdodENvdmVyYWdlUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzID0gcmVzcG9uc2VKc29uW2Jhc2VTY2hlbWVdIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWUgPSBuZXcgUlRyZWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVudHJ5LmJveGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aG9sZVdvcmxkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IC0xODAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogLTkwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDM2MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxODBcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlLmluc2VydCh3aG9sZVdvcmxkLCBlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJveCBvZiBlbnRyeS5ib3hlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtib3R0b20sIGxlZnQsIHRvcCwgcmlnaHRdID0gYm94O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogTWF0aC5taW4obGVmdCwgcmlnaHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLm1pbihib3R0b20sIHRvcCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IE1hdGguYWJzKGxlZnQgLSByaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IE1hdGguYWJzKHRvcCAtIGJvdHRvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUuaW5zZXJ0KGJvdW5kcywgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1fY2FjaGVkQ29weXJpZ2h0UmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBJc29MYW5ndWFnZVRvV2ViVGlsZShsYW5ndWFnZXM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgICAgIHRoaXMubV9sYW5ndWFnZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBsYW5ndWFnZSBvZiBsYW5ndWFnZXMpIHtcbiAgICAgICAgICAgIGlmIChXRUJUSUxFX0xBTkdVQUdFX0RJQ1RJT05BUllbbGFuZ3VhZ2VdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1fbGFuZ3VhZ2VzLnB1c2goV0VCVElMRV9MQU5HVUFHRV9ESUNUSU9OQVJZW2xhbmd1YWdlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7QUFBQTs7OztBQUlBOzs7Ozs7Ozs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBaUZBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW9GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0E7QUFrQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUE1UEE7OztBQUdBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUdBOzs7QUFHQTtBQUNBO0FBR0E7OztBQUdBO0FBQ0E7QUF6QkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../harp-webtile-datasource/lib/WebTileDataSource.ts\n");

/***/ }),

/***/ "./src/datasource_webtile.ts":
/*!***********************************!*\
  !*** ./src/datasource_webtile.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_geoutils_1 = __webpack_require__(/*! @here/harp-geoutils */ \"../harp-geoutils/index.ts\");\nconst harp_map_controls_1 = __webpack_require__(/*! @here/harp-map-controls */ \"../harp-map-controls/index.ts\");\nconst harp_mapview_1 = __webpack_require__(/*! @here/harp-mapview */ \"../harp-mapview/index.ts\");\nconst harp_webtile_datasource_1 = __webpack_require__(/*! @here/harp-webtile-datasource */ \"../harp-webtile-datasource/index.ts\");\nconst config_1 = __webpack_require__(/*! ../config */ \"./config.ts\");\nvar WebTileDataSourceExample;\n(function (WebTileDataSourceExample) {\n    // creates a new MapView for the HTMLCanvasElement of the given id\n    function initializeMapView(id) {\n        const canvas = document.getElementById(id);\n        const map = new harp_mapview_1.MapView({\n            canvas,\n            theme: \"resources/berlin_tilezen_base.json\"\n        });\n        map.setCacheSize(100, 100);\n        // instantiate the default map controls, allowing the user to pan around freely.\n        const controls = new harp_map_controls_1.MapControls(map);\n        // Add an UI.\n        const ui = new harp_map_controls_1.MapControlsUI(controls);\n        canvas.parentElement.appendChild(ui.domElement);\n        harp_mapview_1.CopyrightElementHandler.install(\"copyrightNotice\", map);\n        // resize the mapView to maximum\n        map.resize(window.innerWidth, window.innerHeight);\n        // react on resize events\n        window.addEventListener(\"resize\", () => {\n            map.resize(window.innerWidth, window.innerHeight);\n        });\n        return map;\n    }\n    WebTileDataSourceExample.initializeMapView = initializeMapView;\n    // tslint:disable:max-line-length\n    /**\n     * A simple example using the webtile data source. Tiles are retrieved from\n     * ```typescript\n     * https://1.base.maps.api.here.com/maptile/2.1/maptile/newest/normal.day/${level}/${column}/${row}/512/png8?app_id=${appId}&app_code=${appCode}\n     * ```\n     *\n     * A [[WebTileDataSource]] is created with specified applications' appId and appCode passed\n     * as [[WebTileDataSourceOptions]]\n     * ```typescript\n     * [[include:harp_gl_datasource_webtile_1.ts]]\n     * ```\n     * Then added to the [[MapView]]\n     * ```typescript\n     * [[include:harp_gl_datasource_webtile_2.ts]]\n     * ```\n     */\n    // tslint:enable:max-line-length\n    const mapView = initializeMapView(\"mapCanvas\");\n    // snippet:harp_gl_datasource_webtile_1.ts\n    const webTileDataSource = new harp_webtile_datasource_1.WebTileDataSource({\n        appId: config_1.appId,\n        appCode: config_1.appCode\n    });\n    // end:harp_gl_datasource_webtile_1.ts\n    mapView.geoCenter = new harp_geoutils_1.GeoCoordinates(40.702, -74.01154);\n    // snippet:harp_gl_datasource_webtile_2.ts\n    mapView.addDataSource(webTileDataSource);\n    // end:harp_gl_datasource_webtile_2.ts\n})(WebTileDataSourceExample = exports.WebTileDataSourceExample || (exports.WebTileDataSourceExample = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YXNvdXJjZV93ZWJ0aWxlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFzb3VyY2Vfd2VidGlsZS50cz9mZDNiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTctMjAxOSBIRVJFIEV1cm9wZSBCLlYuXG4gKiBMaWNlbnNlZCB1bmRlciBBcGFjaGUgMi4wLCBzZWUgZnVsbCBsaWNlbnNlIGluIExJQ0VOU0VcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgR2VvQ29vcmRpbmF0ZXMgfSBmcm9tIFwiQGhlcmUvaGFycC1nZW91dGlsc1wiO1xuaW1wb3J0IHsgTWFwQ29udHJvbHMsIE1hcENvbnRyb2xzVUkgfSBmcm9tIFwiQGhlcmUvaGFycC1tYXAtY29udHJvbHNcIjtcbmltcG9ydCB7IENvcHlyaWdodEVsZW1lbnRIYW5kbGVyLCBNYXBWaWV3IH0gZnJvbSBcIkBoZXJlL2hhcnAtbWFwdmlld1wiO1xuaW1wb3J0IHsgV2ViVGlsZURhdGFTb3VyY2UgfSBmcm9tIFwiQGhlcmUvaGFycC13ZWJ0aWxlLWRhdGFzb3VyY2VcIjtcbmltcG9ydCB7IGFwcENvZGUsIGFwcElkIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xuXG5leHBvcnQgbmFtZXNwYWNlIFdlYlRpbGVEYXRhU291cmNlRXhhbXBsZSB7XG4gICAgLy8gY3JlYXRlcyBhIG5ldyBNYXBWaWV3IGZvciB0aGUgSFRNTENhbnZhc0VsZW1lbnQgb2YgdGhlIGdpdmVuIGlkXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVNYXBWaWV3KGlkOiBzdHJpbmcpOiBNYXBWaWV3IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXBWaWV3KHtcbiAgICAgICAgICAgIGNhbnZhcyxcbiAgICAgICAgICAgIHRoZW1lOiBcInJlc291cmNlcy9iZXJsaW5fdGlsZXplbl9iYXNlLmpzb25cIlxuICAgICAgICB9KTtcbiAgICAgICAgbWFwLnNldENhY2hlU2l6ZSgxMDAsIDEwMCk7XG5cbiAgICAgICAgLy8gaW5zdGFudGlhdGUgdGhlIGRlZmF1bHQgbWFwIGNvbnRyb2xzLCBhbGxvd2luZyB0aGUgdXNlciB0byBwYW4gYXJvdW5kIGZyZWVseS5cbiAgICAgICAgY29uc3QgY29udHJvbHMgPSBuZXcgTWFwQ29udHJvbHMobWFwKTtcblxuICAgICAgICAvLyBBZGQgYW4gVUkuXG4gICAgICAgIGNvbnN0IHVpID0gbmV3IE1hcENvbnRyb2xzVUkoY29udHJvbHMpO1xuICAgICAgICBjYW52YXMucGFyZW50RWxlbWVudCEuYXBwZW5kQ2hpbGQodWkuZG9tRWxlbWVudCk7XG5cbiAgICAgICAgQ29weXJpZ2h0RWxlbWVudEhhbmRsZXIuaW5zdGFsbChcImNvcHlyaWdodE5vdGljZVwiLCBtYXApO1xuXG4gICAgICAgIC8vIHJlc2l6ZSB0aGUgbWFwVmlldyB0byBtYXhpbXVtXG4gICAgICAgIG1hcC5yZXNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cbiAgICAgICAgLy8gcmVhY3Qgb24gcmVzaXplIGV2ZW50c1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBtYXAucmVzaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbWFwO1xuICAgIH1cblxuICAgIC8vIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aFxuICAgIC8qKlxuICAgICAqIEEgc2ltcGxlIGV4YW1wbGUgdXNpbmcgdGhlIHdlYnRpbGUgZGF0YSBzb3VyY2UuIFRpbGVzIGFyZSByZXRyaWV2ZWQgZnJvbVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBodHRwczovLzEuYmFzZS5tYXBzLmFwaS5oZXJlLmNvbS9tYXB0aWxlLzIuMS9tYXB0aWxlL25ld2VzdC9ub3JtYWwuZGF5LyR7bGV2ZWx9LyR7Y29sdW1ufS8ke3Jvd30vNTEyL3BuZzg/YXBwX2lkPSR7YXBwSWR9JmFwcF9jb2RlPSR7YXBwQ29kZX1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEEgW1tXZWJUaWxlRGF0YVNvdXJjZV1dIGlzIGNyZWF0ZWQgd2l0aCBzcGVjaWZpZWQgYXBwbGljYXRpb25zJyBhcHBJZCBhbmQgYXBwQ29kZSBwYXNzZWRcbiAgICAgKiBhcyBbW1dlYlRpbGVEYXRhU291cmNlT3B0aW9uc11dXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIFtbaW5jbHVkZTpoYXJwX2dsX2RhdGFzb3VyY2Vfd2VidGlsZV8xLnRzXV1cbiAgICAgKiBgYGBcbiAgICAgKiBUaGVuIGFkZGVkIHRvIHRoZSBbW01hcFZpZXddXVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBbW2luY2x1ZGU6aGFycF9nbF9kYXRhc291cmNlX3dlYnRpbGVfMi50c11dXG4gICAgICogYGBgXG4gICAgICovXG4gICAgLy8gdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGhcblxuICAgIGNvbnN0IG1hcFZpZXcgPSBpbml0aWFsaXplTWFwVmlldyhcIm1hcENhbnZhc1wiKTtcblxuICAgIC8vIHNuaXBwZXQ6aGFycF9nbF9kYXRhc291cmNlX3dlYnRpbGVfMS50c1xuICAgIGNvbnN0IHdlYlRpbGVEYXRhU291cmNlID0gbmV3IFdlYlRpbGVEYXRhU291cmNlKHtcbiAgICAgICAgYXBwSWQsXG4gICAgICAgIGFwcENvZGVcbiAgICB9KTtcbiAgICAvLyBlbmQ6aGFycF9nbF9kYXRhc291cmNlX3dlYnRpbGVfMS50c1xuXG4gICAgbWFwVmlldy5nZW9DZW50ZXIgPSBuZXcgR2VvQ29vcmRpbmF0ZXMoNDAuNzAyLCAtNzQuMDExNTQpO1xuXG4gICAgLy8gc25pcHBldDpoYXJwX2dsX2RhdGFzb3VyY2Vfd2VidGlsZV8yLnRzXG4gICAgbWFwVmlldy5hZGREYXRhU291cmNlKHdlYlRpbGVEYXRhU291cmNlKTtcbiAgICAvLyBlbmQ6aGFycF9nbF9kYXRhc291cmNlX3dlYnRpbGVfMi50c1xufVxuIl0sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7QUFJQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBM0JBO0FBNkJBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/datasource_webtile.ts\n");

/***/ }),

/***/ "three":
/*!************************!*\
  !*** external "THREE" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = THREE;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhyZWUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJUSFJFRVwiP2ZjMDAiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBUSFJFRTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///three\n");

/***/ })

/******/ });